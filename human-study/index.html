<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIK Capability Human Study</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div id="container">
        <h1 style="padding-bottom: 20px;">Context is Key Benchmark - Human Study Platform</h1>

        <!-- Source URL and Fetch Button -->
        <div class="source-wrapper">
            <label for="page-url" class="source-label">Source:</label>
            <input type="text" id="page-url" class="source-input" placeholder="Enter URL here...">
            <button class="fetch-button" onclick="fetchTasks()">Reset</button>
        </div>

        <!-- Progress Bar and Download Button -->
        <div id="progress-wrapper">
            <div id="progress-container">
                <div id="progress-bar"></div>
            </div>
            <span id="progress-info">0/0</span>
            <button onclick="downloadJSON()">Download Results</button>
        </div>

        <!-- Annotation Instruction -->
        <p class="progress-instruction">
            Please inspect the task below and annotate it by selecting which capabilities are required to
            interpret the context and accurately forecast the time series. Before proceeding, please
            read the <a href="#" class="definition-link" onclick="showDefinitions()">definition</a> of each capability
            carefully.
            Once you are done, please download the results and send us the json file.
        </p>

        <!-- Content and Annotation Pane -->
        <div class="content-wrapper">
            <div id="rendered-content"
                style="display: none; resize: both; overflow: auto; min-width: 200px; min-height: 100px; border: 1px solid #ccc;">
            </div>
            <div id="annotation-pane" style="display: none;">
                <h3>Capabilities</h3>
                <p class="annotation-instructions">
                    Please select all that apply.
                </p>
                <form id="capabilities-form">
                    <label class="capability-checkbox">
                        <input type="checkbox" value="retrieval: context"> Discriminating relevant context
                    </label>
                    <label class="capability-checkbox">
                        <input type="checkbox" value="retrieval: memory"> Recalling from memory
                    </label>
                    <label class="capability-checkbox">
                        <input type="checkbox" value="reasoning: analogy"> Analogical Reasoning
                    </label>
                    <label class="capability-checkbox">
                        <input type="checkbox" value="reasoning: deduction"> Deductive Reasoning
                    </label>
                    <label class="capability-checkbox">
                        <input type="checkbox" value="reasoning: math"> Mathematical Reasoning
                    </label>
                    <label class="capability-checkbox">
                        <input type="checkbox" value="reasoning: causal"> Causal Reasoning
                    </label>
                    <label class="capability-checkbox">
                        <input type="checkbox" value="none-of-the-above"> None of the above
                    </label>
                    <!-- New Yes/No Question -->
                    <div class="yes-no-question">
                        <p>Is the Context Useful?</p>
                        <label class="yes-no-option">
                            <input type="radio" name="test-question" value="yes"> Yes
                        </label>
                        <label class="yes-no-option">
                            <input type="radio" name="test-question" value="no"> No
                        </label>
                    </div>
                    <div class="button-container">
                        <button type="button" class="next-button" onclick="saveAnnotationsAndNext()">Save</button>
<!--                         <button type="button" class="skip-button" onclick="skipTask()">Skip</button> -->
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Definitions Modal -->
    <div id="definitions-modal" class="modal" style="display: none;">
        <div class="modal-content" style="max-height: 80vh; overflow-y: auto;">
            <span class="close-button" onclick="closeDefinitions()">&times;</span>
            <h2>Capability Definitions</h2>
            <hr>
            <ul>
                <li><strong>Discriminating relevant context:</strong>
                    Forecasts would rely on a human's ability to retrieve relevant information from the context and
                    distinguish it from irrelevant information.
                    <ul style="font-size: 0.9em; margin-left: 25px;">
                        <li><strong>Forecast total production for tableware manufacturing:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“The warehouse is U-shaped. There’s a huge order for which production will ramp up
                                    starting next week. Napkins are typically 4-fold.”</li>
                            </ul>
                        </li>
                        <li><strong>Forecast air passenger traffic:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“The plane for this route has a maximum of 50 passengers. In past years, the air
                                    traffic around this time was about 40 passengers per flight. The plane is blue.”
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <hr>
                <li><strong>Recalling from memory:</strong>
                    Forecasts would rely on facts from memory or a knowledge base, such as relevant physical constants
                    or quantitative laws.
                    <ul style="font-size: 0.9em; margin-left: 25px;">
                        <li><strong>Forecast total production for tableware manufacturing:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“Production is currently in May. Note that production is positively correlated with
                                    temperature.”</li>
                            </ul>
                        </li>
                        <li><strong>Forecast air passenger traffic:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“Travel on this route is usually higher right before the holidays. Forecast for
                                    December and January.”</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <hr>
                <li><strong>Deductive Reasoning:</strong>
                    Forecasts would rely on a human’s ability to draw valid inferences from the context, e.g. inferring
                    from the context that certain values are logically impossible to occur.
                    <ul style="font-size: 0.9em; margin-left: 25px;">
                        <li><strong>Forecast total production for tableware manufacturing:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“Historically, the machines were under maintenance on Mondays, but not anymore.”
                                </li>
                                <li>"The machines are currently under maintenance."</li>
                            </ul>
                        </li>
                        <li><strong>Forecast air passenger traffic:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“An ongoing blizzard is about to end.”</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <hr>
                <li><strong>Causal Reasoning:</strong>
                    Forecasts would rely on a human’s ability to reason about cause and effect from the context, such as
                    reasoning about the impacts of various actions described in the context.
                    <ul style="font-size: 0.9em; margin-left: 25px;">
                        <li><strong>Forecast total production for tableware manufacturing:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“The production is specified by [equations linking inputs to outputs]. The planned
                                    inputs at times t are [...]”</li>
                            </ul>
                        </li>
                        <li><strong>Forecast air passenger traffic:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“Since both air ticket and ice cream sales spike during summer, the company plans to
                                    bolster air tickets by subsidizing ice cream sales.”</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <hr>
                <li><strong>Mathematical Reasoning:</strong>
                    Forecasts would rely on a human’s ability to perform mathematics over the context, such as
                    arithmetic or solving equations.
                    <ul style="font-size: 0.9em; margin-left: 25px;">
                        <li><strong>Forecast total production for tableware manufacturing:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“Production is expected to ramp up 10% per day over the next five days.”</li>
                            </ul>
                        </li>
                        <li><strong>Forecast air passenger traffic:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“The previous year’s total traffic was 3000. Forecast air passenger traffic weekly.”</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <hr>
                <li><strong>Analogical Reasoning:</strong>
                    Forecasts would rely on a human's ability to forecast by way of analogy between entities or events,
                    for instance, applying knowledge from a past event that is similar to an upcoming one.
                    <ul style="font-size: 0.9em; margin-left: 25px;">
                        <li><strong>Forecast total production for tableware manufacturing:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“Here’s the historical production for a similar plant in a similar town.”</li>
                            </ul>
                        </li>
                        <li><strong>Forecast air passenger traffic:</strong>
                            <ul style="font-size: 0.9em; margin-left: 25px;">
                                <li>“Here’s the historical traffic from a similar plane on a similar route.”</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <hr>
                <li><strong>Useful Context (yes/no):</strong>
                    Does the context enable better forecasts?
                </li>
            </ul>
        </div>
    </div>
    <!-- Include Scripts -->



    <script src="./scripts.js"></script>
</body>

</html>
